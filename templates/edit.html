{% extends "base.html" %}

{% block title %}
    Edit
{% endblock %}
{% block content %}
    <h1>Edit your letter</h1>
    <form method="POST" action={{ url_for('edit_para')}}>
        {% for paragraph in paragraphed_letter %}
                <textarea cols="80" name="para_{{ loop.index }}">{{ paragraph }}</textarea>
                <br>
                <button type="button" class="open-button" id="open-button-{{loop.index}}" onclick="openForm({{ loop.index }})">Re-write Paragraph</button>
                <div class="form-container" id="myForm-{{ loop.index }}">
                    <h5>Describe how to re-write.</h5>
                    <input type="text" placeholder="eg. Use stronger tone" name="instruction_{{ loop.index }}">        
                    <button type="submit" id="para-submit-button-{{loop.index}}" class="btn">Re-write Now</button>
                    <button type="button" class="btn cancel" onclick="closeForm({{ loop.index }})">Back</button>
                </div>
            <br><br>
        {% endfor %}
        <button type="submit" class="open-button submit-btn">Submit</button>
    </form>

    <script>
        function openForm(id) {
          console.log('some');
          document.getElementById(`myForm-${id}`).style.display = "block";
          document.getElementById(`open-button-${id}`).style.display = "none";
        }
        
        function closeForm(id) {
          document.getElementById(`myForm-${id}`).style.display = "none";
          document.getElementById(`open-button-${id}`).style.display = "block";
        }
    </script>
{% endblock %}